### (p. 192, SM) 포스트ID 관계가 캐시에만 저장이 되는건데, 메모리는 휘발성이므로 안전하지 않은데 이렇게 한 이유?

현제 설계에서는 **두 가지 주요 사항을 고려**하여 최적화되었다.

**효율성**

-   뉴스 피드 서비스에서 가장 중요한 것은 사용자가 새로운 콘텐츠를 실시간으로 볼 수 있게 하는 것
-   새로운 포스팅이 생성되면, 그 포스팅을 친구들의 뉴스 피드에 신속하게 전달하는 것이 중요
-   따라서 새로운 포스팅이 만들어질 때마다 팬아웃 작업을 수행하는 것이 필요

**사용 가능성**

-   캐시는 휘발성이 있지만, 그것은 임시 저장 공간이므로 데이터를 영구적으로 저장할 필요
-   포스팅 정보와 사용자 정보를 모두 캐시에 저장하지 않는 것은 공간 효율성을 위한 것
-   캐시는 빠른 액세스를 위한 것이며, 모든 데이터를 저장하려면 많은 공간이 필요하므로 선택적으로 중요한 데이터만 저장

_캐시 데이터를 별도의 영구적인 저장소(예: 데이터베이스)에 저장하는 경우도 있다._

-   장점은 캐시의 휘발성을 극복하고, 장애나 다운타임 등이 발생했을 때 캐시를 빠르게 복구할 수 있다는 것
-   그러나, 데이터베이스에 캐시를 저장하려면 추가적인 디스크 공간이 필요하며, 이로 인해 관리 비용이 증가
-   또한, 캐시의 빠른 성능을 유지하려면 캐시와 영구 저장소 사이의 동기화를 잘 관리해야 함
-   이를 제대로 처리하지 못하면 오히려 성능 저하를 초래

<br/>

### (p. 194, GC) 횟수 값을 디비에 갖고있지 않고 캐시에만 저장한다는 것이 올바른가?

**횟수값을 데이터베이스에 보관하지 않고 캐시에만 저장하는 것이 바람직한가에 대한 질문은 시스템의 특성과 요구 사항에 따라 달라진다.**

-   횟수값은 일반적으로 상대적으로 빈번하게 변경되며, 실시간으로 접근이 필요한 정보일 수 있다
-   따라서 이러한 횟수값을 캐시에 보관하는 것은 시스템의 반응성과 성능을 향상시키는 데 도움이 될 수 있다
-   만약 횟수값이 비즈니스 로직에 중요하거나 데이터 손실이 허용되지 않는 경우, 캐시와 별도로 데이터베이스에도 횟수값을 저장하는 것이 바람직
-   횟수값을 데이터베이스에 갖고 있지 않고 캐시에만 저장하는 것이 올바른지는, 횟수값의 중요성, 데이터 손실에 대한 허용도, 시스템의 성능 요구사항 등 여러 요소를 종합적으로 고려하여 결정할 문제

<br/>

### Appendix : Kubernetes 운영을 위한 etcd 기본 동작 원리의 이해

> https://tech.kakao.com/2021/12/20/kubernetes-etcd/

_Kubernetes는 기반 스토리지(backing storage)로 etcd를 사용하고 있고, 모든 데이터가 etcd에 보관됩니다. 예를 들어, 클러스터에 어떤 노드가 몇 개나 있고 어떤 파드가 어떤 노드에서 동작하고 있는지가 etcd에 기록됩니다. 만약 동작 중인 클러스터의 etcd 데이터베이스가 유실된다면 컨테이너뿐만 아니라 클러스터가 사용하는 모든 리소스가 미아가 되어 버립니다._
